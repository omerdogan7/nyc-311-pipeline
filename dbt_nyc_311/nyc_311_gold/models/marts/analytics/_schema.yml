version: 2

models:
  - name: covid_impact_analysis
    description: "Analysis of COVID-19 pandemic impact on NYC 311 complaint patterns, volumes, and response metrics"
    config:
      tags: ['analytics', 'covid']
    columns:
      - name: year
        description: "Year of analysis"
        tests:
          - not_null
      
      - name: month
        description: "Month of analysis"
        tests:
          - not_null
      
      - name: covid_period
        description: "COVID period classification (Pre-COVID, COVID Peak, Post-COVID)"
        tests:
          - not_null
          - accepted_values:
              values: ['Pre-COVID', 'COVID Peak', 'Post-COVID']
      
      - name: total_complaints
        description: "Total complaints in the period"
        tests:
          - not_null
      
      - name: volume_change_pct
        description: "Percentage change in complaint volume vs 2019 baseline"
      
      - name: noise_change_pct
        description: "Percentage change in noise complaints vs baseline"
      
      - name: transportation_change_pct
        description: "Percentage change in transportation complaints vs baseline"
      
      - name: wfh_impact_score
        description: "Work-from-home impact score (noise to transportation ratio)"
      
      - name: covid_pattern_indicator
        description: "COVID-related pattern classification"
      
      - name: created_at
        description: "Timestamp when record was created"
        tests:
          - not_null

  - name: holiday_pattern_analysis
    description: "Analysis of holiday impact patterns on complaint volume and types with 7-day window analysis"
    config:
      tags: ['analytics', 'holiday', 'seasonal']
    columns:
      - name: holiday_name
        description: "Name of the holiday being analyzed"
        tests:
          - not_null
      
      - name: holiday_category
        description: "Category of holiday (Major Winter Holiday, July 4th, Long Weekend Holiday, etc.)"
        tests:
          - not_null
      
      - name: days_from_holiday
        description: "Days from holiday (-3 to +3, 0 = holiday day)"
        tests:
          - not_null
      
      - name: period_description
        description: "Human readable period description (e.g., '1 Day Before', 'Holiday Day')"
        tests:
          - not_null
      
      - name: total_complaints
        description: "Total complaints in the period"
        tests:
          - not_null
      
      - name: volume_deviation_pct
        description: "Percentage deviation from average holiday volume"
      
      - name: noise_percentage
        description: "Percentage of complaints that are noise-related"
      
      - name: fireworks_complaints
        description: "Number of fireworks-related complaints"
      
      - name: holiday_pattern_indicator
        description: "Holiday-specific pattern classification"
      
      - name: holiday_impact_score
        description: "Overall holiday impact score (deviation from normal)"
      
      - name: created_at
        description: "Timestamp when record was created"
        tests:
          - not_null

  - name: seasonal_trends
    description: "Comprehensive seasonal analysis of NYC 311 complaints with weather-related patterns and climate sensitivity"
    config:
      tags: ['analytics', 'seasonal', 'trends']
    columns:
      - name: month
        description: "Month number (1-12)"
        tests:
          - not_null
          - accepted_values:
              values: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
      
      - name: month_name
        description: "Month name (January, February, etc.)"
        tests:
          - not_null
      
      - name: season
        description: "Season classification (Winter, Spring, Summer, Fall)"
        tests:
          - not_null
          - accepted_values:
              values: ['Winter', 'Spring', 'Summer', 'Fall']
      
      - name: nyc_seasonal_context
        description: "NYC-specific seasonal context (Heating Season, Outdoor Activity Season, etc.)"
        tests:
          - not_null
      
      - name: total_complaints
        description: "Total complaints in the month"
        tests:
          - not_null
      
      - name: monthly_deviation_pct
        description: "Percentage deviation from annual average"
      
      - name: seasonal_deviation_pct
        description: "Percentage deviation from seasonal average"
      
      - name: heating_complaints
        description: "Number of heating-related complaints"
      
      - name: winter_weather_complaints
        description: "Number of snow/ice-related complaints"
      
      - name: seasonal_pattern_indicator
        description: "Seasonal pattern classification"
      
      - name: seasonality_strength
        description: "How strongly seasonal this month is (deviation score)"
      
      - name: climate_sensitivity
        description: "Climate sensitivity indicator (Climate Sensitive, Weather Sensitive, Climate Stable)"
        tests:
          - accepted_values:
              values: ['Climate Sensitive', 'Weather Sensitive', 'Climate Stable']
      
      - name: created_at
        description: "Timestamp when record was created"
        tests:
          - not_null